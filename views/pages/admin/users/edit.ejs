<%- include ../../../partials/admin/dashboard -%>
<div class="content-wrapper py-3">
  <div class="container-fluid">
        <div class="card mb-3">
          <div class="card-header">
            <i class="fa fa-fw fa-code"></i>
            Add User
          </div>
          <div class="card-body">
							<%
							var eusername = "", efullname = "", epassword = "", eemail="";
							if(typeof error !== 'undefined' && error !== null) {
									eusername = error.erusername;
									efullname = error.erfullname;
									eemail = error.eremail;
									epassword = error.erpassword;
								}
							%>
              <form id="edit-post" action="../../user/edit/<%=edituser.mId %>" method="post">
              	<div class="form-group">
	              	<label>Username</label>
									<input autocomplete="off" class="form-control" type="text" name="username" value="<%=edituser.mUsername %>" disabled/>
									<span style="color:red"><%=eusername%></span>
              	</div>
              	
              	<div class="form-group">
	              	<label>Fullname</label>
									<input autocomplete="off" class="form-control" name="fullname" value="<%=edituser.mFullname %>" />
									<span style="color:red"><%=efullname%></span>
								</div>
								<div class="form-group">
									<label>Email</label>
									<input class="form-control" name="email" value="<%=edituser.mEmail %>"/>
									<span style="color:red"><%=eemail%></span>
								</div>
              	<div class="form-group">
	              	<label>Role</label>
	              	<select class="form-control" name="role_id">
										<% 
											roles.forEach(function(item){ 
											var selected="" ;
											if(item.mId == edituser.mRoleId) selected="selected";
										%>
											<option <%= selected %> value="<%= item.mId%>" ><%= item.mRole%></option>
										<% }); %>
									</select>
								</div>
								<div class="form-group">
										<label>Password</label>
										<input type="password" class="form-control" name="password" value="" placeholder="********"/>
								</div>
								
              	<div>
              		<input class="btn btn-primary" type="submit" name="submit" value="Update" />
              	</div>
              </form>
              
							<script type="text/javascript">
      				$(document).ready(function() {
      					$("#edit-post").validate({
      						ignore: [],
      			            debug: false,
      						rules: {
								username: { 
									required : true,
									minlength: 6
								},
								fullname: { 
									required : true
								},
								email: { 
									required : true,
									email : true
								}
      						},
      						messages: {
								username: 
								{
									required : "Please enter this field",
									minlength : "The length of username must be longer than 6"
								},
								fullname:{
									required: "Please enter this field"
								},
								email:{
									required: "Please enter this field",
									email : "Please enter an email"
								}}
      					});
      				});
      			</script>
          </div>
        </div>
      </div>
  </div>
  <%- include ../../../partials/admin/footer -%>
